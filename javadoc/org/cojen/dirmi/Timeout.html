<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html" charset="UTF-8">
<title>Timeout (Dirmi 1.0 API)</title>
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="Timeout (Dirmi 1.0 API)";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/Timeout.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../org/cojen/dirmi/SessionListener.html" title="interface in org.cojen.dirmi"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../org/cojen/dirmi/TimeoutParam.html" title="annotation in org.cojen.dirmi"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?org/cojen/dirmi/Timeout.html" target="_top">Frames</a></li>
<li><a href="Timeout.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#annotation_type_required_element_summary">Required</a>&nbsp;|&nbsp;</li>
<li>Optional</li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#annotation_type_element_detail">Element</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.cojen.dirmi</div>
<h2 title="Annotation Type Timeout" class="title">Annotation Type Timeout</h2>
</div>
<div class="contentContainer">
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/annotation/Documented.html?is-external=true" title="class or interface in java.lang.annotation">@Documented</a>
<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/annotation/Retention.html?is-external=true" title="class or interface in java.lang.annotation">@Retention</a>(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/annotation/Retention.html?is-external=true#value()" title="class or interface in java.lang.annotation">value</a>=<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/annotation/RetentionPolicy.html?is-external=true#RUNTIME" title="class or interface in java.lang.annotation">RUNTIME</a>)
<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/annotation/Target.html?is-external=true" title="class or interface in java.lang.annotation">@Target</a>(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/annotation/Target.html?is-external=true#value()" title="class or interface in java.lang.annotation">value</a>={<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/annotation/ElementType.html?is-external=true#METHOD" title="class or interface in java.lang.annotation">METHOD</a>,<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/annotation/ElementType.html?is-external=true#TYPE" title="class or interface in java.lang.annotation">TYPE</a>})
public @interface <span class="strong">Timeout</span></pre>
<div class="block">Remote method timeout policy annotation, which can target a remote interface
 or method. When annotated at the interface level, it defines default timeout
 values for all methods. Any method can override the defaults with its own
 annotation. The timeout annotation can be used with <a href="../../../org/cojen/dirmi/TimeoutUnit.html" title="annotation in org.cojen.dirmi"><code>TimeoutUnit</code></a> to
 define the unit. If not specified, it defaults to milliseconds.

 <p>Timeouts only apply to the caller of a remote method. If the timeout has
 elapsed without a response from the remote endpoint, the connection is
 forcibly closed and a <a href="../../../org/cojen/dirmi/RemoteTimeoutException.html" title="class in org.cojen.dirmi"><code>RemoteTimeoutException</code></a> is thrown. When this
 happens, no special action is automatically applied on the remote side to
 interrupt any work in progress. The actual method implementation is
 responsible for this. If it completes its work and returns after a timeout,
 the response is discarded.

 <p>When a <a href="../../../org/cojen/dirmi/RemoteTimeoutException.html" title="class in org.cojen.dirmi"><code>RemoteTimeoutException</code></a> is thrown, it does not indicate
 whether the remote endpoint actually received the request or not. Care must
 be taken when attempting to retry a failed remote invocation, especially if
 not idempotent. <a href="../../../org/cojen/dirmi/Asynchronous.html" title="annotation in org.cojen.dirmi"><code>Asynchronous</code></a> methods with callbacks can provide more
 information regarding successful invocation, but timeouts on asynchronous
 methods alone offer less utility. This is because the timeout on an
 asynchronous method only applies to the sending of the request. It does not
 wait for method completion. When using the <a href="../../../org/cojen/dirmi/CallMode.html#ACKNOWLEDGED"><code>acknowledged</code></a> calling mode, timeouts do at least wait for acknowledgement.
 Consider returning a <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent"><code>Future</code></a> and call the <code>get</code> method which
 accepts a timeout.

 <p>Method parameters may use the <a href="../../../org/cojen/dirmi/TimeoutParam.html" title="annotation in org.cojen.dirmi"><code>TimeoutParam</code></a> annotation to specify
 timeout values and units. When applied to a primitive numeric type (which
 can be boxed), it specifies the timeout value. At most one parameter can be
 a timeout value. When the annotation is applied to a parameter of type
 <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/TimeUnit.html?is-external=true" title="class or interface in java.util.concurrent"><code>TimeUnit</code></a>, it specifies the timeout unit. Likewise, at most one
 parameter can be a timeout unit. If no parameter is annotated as a timeout
 unit but the parameter immediately following the timeout value is a <code>TimeUnit</code>, it is automatically chosen as the timeout unit parameter.

 <p>Remote method implementations may make use of timeout parameters to
 interrupt any work in progress, under the assumption that the caller has
 given up after the timeout has elapsed.

 <p>Timeout parameters can have runtime values of null, in which case default
 timeouts apply. These defaults are defined by any method and interface level
 timeout annotations. If none, then the default timeout value is infinite and
 the unit is milliseconds. In either case, the remote endpoint sees the
 applied values instead of null. If the timeout value cannot be cast to the
 parameter type without loss of magnitude, -1 (infinite) is passed instead.

 <pre>
 // 10 second timeout for all methods by default.
 <b>&#64;Timeout(10)</b>
 // If unit was not specified, milliseconds is assumed.
 <b>&#64;TimeoutUnit(TimeUnit.SECONDS)</b>
 public interface MyRemote extends Remote {
     // Default 10 second timeout applies.
     String getItemName(String id) throws RemoteException;

     // Override with a 20 second timeout.
     <b>&#64;Timeout(20)</b>
     String getItemDescription(String id) throws RemoteException;

     // Override with a 100 millisecond timeout.
     <b>&#64;Timeout(100)</b>
     <b>&#64;TimeoutUnit(TimeUnit.MILLISECONDS)</b>
     String disableItem(String id) throws RemoteException;

     // A parameter is passed to define the timeout, overriding the default.
     // The timeout unit is seconds, as defined by the interface level annotation.
     void runReport(String param, <b>&#64;TimeoutParam</b> int timeout) throws RemoteException;

     // A parameter and unit is passed to define the timeout. If runtime unit is
     // is null, it defaults to minutes.
     <b>&#64;TimeoutUnit(TimeUnit.MINUTES)</b>
     void runReport(String param, <b>&#64;TimeoutParam</b> int timeout, TimeUnit unit)
         throws RemoteException;

     // The timeout parameter is explicitly annotated, because of its non-standard
     // argument position. If runtime unit is null, seconds is assumed because
     // of interface level annotation.
     void runReport(String param, <b>&#64;TimeoutParam</b> TimeUnit unit, <b>&#64;TimeoutParam</b> int timeout)
         throws RemoteException;
 }
 </pre></div>
<dl><dt><span class="strong">Author:</span></dt>
  <dd>Brian S O'Neill</dd>
<dt><span class="strong">See Also:</span></dt><dd><a href="../../../org/cojen/dirmi/TimeoutUnit.html" title="annotation in org.cojen.dirmi"><code>TimeoutUnit</code></a>, 
<a href="../../../org/cojen/dirmi/TimeoutParam.html" title="annotation in org.cojen.dirmi"><code>TimeoutParam</code></a></dd></dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== ANNOTATION TYPE REQUIRED MEMBER SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="annotation_type_required_element_summary">
<!--   -->
</a>
<h3>Required Element Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Required Element Summary table, listing required elements, and an explanation">
<caption><span>Required Elements</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Required Element and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../org/cojen/dirmi/Timeout.html#value()">value</a></strong></code>
<div class="block">Specify the timeout duration.</div>
</td>
</tr>
</table>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ ANNOTATION TYPE MEMBER DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="annotation_type_element_detail">
<!--   -->
</a>
<h3>Element Detail</h3>
<a name="value()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>value</h4>
<pre>public abstract&nbsp;long&nbsp;value</pre>
<div class="block">Specify the timeout duration. Any negative value indicates an infinite
 timeout.</div>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/Timeout.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../org/cojen/dirmi/SessionListener.html" title="interface in org.cojen.dirmi"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../org/cojen/dirmi/TimeoutParam.html" title="annotation in org.cojen.dirmi"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?org/cojen/dirmi/Timeout.html" target="_top">Frames</a></li>
<li><a href="Timeout.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#annotation_type_required_element_summary">Required</a>&nbsp;|&nbsp;</li>
<li>Optional</li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#annotation_type_element_detail">Element</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2006-2013 <a href="https://github.com/cojen">Cojen</a>. All Rights Reserved.</small></p>
</body>
</html>
